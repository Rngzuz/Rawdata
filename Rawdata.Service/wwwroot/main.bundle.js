!function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],p=0,h=[];p<o.length;p++)i=o[p],a[i]&&h.push(a[i][0]),a[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);for(d&&d(e);h.length;)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={0:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push([511,1]),n()}({207:function(t,e,n){var s=n(208);"string"==typeof s&&(s=[[t.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(121)(s,a);s.locals&&(t.exports=s.locals)},208:function(t,e,n){(t.exports=n(120)(!1)).push([t.i,"so-app {\r\n    padding-top: 56px;\r\n    min-height: 100vh;\r\n}\r\n\r\nso-app,\r\nso-home,\r\nso-loader,\r\nso-navbar,\r\nso-forcegraph,\r\nso-search,\r\nso-user-profile,\r\nso-word-cloud,\r\nso-post,\r\nso-prompt {\r\n    display: block;\r\n}\r\n\r\n.card-post + .list-group {\r\n    max-width: 800px;\r\n}\r\n\r\n.card-post + .list-group > .list-group-item:first-child  {\r\n    border-top-left-radius: 0;\r\n    border-top-right-radius: 0;\r\n    margin-top: -1px;\r\n}\r\n\r\n.card-list-note {\r\n    z-index: 2;\r\n    position: absolute;\r\n    height: 143px;\r\n    width: 250px;\r\n}\r\n\r\nmark {\r\n    padding: .02rem .4rem .1rem .4rem;\r\n    font-size: 87.5%;\r\n    background-color: #fff2b3;\r\n    border-radius: .2rem;\r\n}\r\n\r\n#loader {\r\n    z-index: 1;\r\n    position: absolute;\r\n    top: calc(50% + 56px);\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n}\r\n\r\n.navbar {\r\n    box-shadow: 0 0 4px rgba(0, 0, 0, .35);\r\n    padding-right: 0;\r\n    padding-left: 0;\r\n}\r\n\r\n.navbar > .container {\r\n    position: relative;\r\n    padding-right: 1rem !important;\r\n    padding-left: 1rem !important;\r\n}\r\n\r\n.btn-sign-in {\r\n    padding-right: 5rem;\r\n}\r\n\r\nso-search {\r\n    padding-top: 56px;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background-color: rgba(0, 0, 0, .5)\r\n}\r\n\r\n.card-rounded-bottom {\r\n    border-radius: 0 0 .25rem .25rem;\r\n}\r\n\r\n.card-body-list {\r\n    padding: .75rem 1.25rem;\r\n}\r\n\r\n.card-body h1 {\r\n    font-size: 1.5rem;\r\n}\r\n\r\n.card-body h2 {\r\n    font-size: 1.3rem;\r\n}\r\n\r\n.card-body h3 {\r\n    font-size: 1.1rem;\r\n}\r\n\r\n.score {\r\n    margin-top: .3rem;\r\n    font-size: 1.1rem;\r\n}\r\n\r\n/* force graph stuff */\r\n.links line {\r\n    stroke: #999;\r\n    stroke-opacity: 0.6;\r\n}\r\n\r\n.nodes circle {\r\n    stroke: rgb(2, 142, 235);\r\n    stroke-width: 1.5px;\r\n}\r\n\r\ntext {\r\n    font-family: sans-serif;\r\n    font-size: 10px;\r\n}\r\n\r\npre:last-child, p:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.card-user-profile {\r\n    padding-top: 1.25rem;\r\n    padding-bottom: 1.75rem;\r\n\r\n    font-size: 25px;\r\n}\r\n\r\n.profile-title {\r\n    padding-top: 1.25rem;\r\n}\r\n\r\n.profile-note {\r\n    font-size: 25px;\r\n    font-style: italic;\r\n    padding-bottom: 1.5rem;\r\n    color: #007bff;\r\n}\r\n\r\n.marked-star {\r\n     padding-right: 1.25rem;\r\n     padding-left: 1.25rem;\r\n     color: #007bff;\r\n }\r\n\r\n.marked-edit {\r\n    padding-right: 1.0rem;\r\n    padding-left: 1.25rem;\r\n    color: #007bff;\r\n}\r\n\r\n\r\n\r\n.card-score, .card-star {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 50px;\r\n    line-height: 1;\r\n    border-radius: .25rem;\r\n    font-weight: bold;\r\n}\r\n\r\n.card-star + .card-score {\r\n    margin-top: .75rem;\r\n}\r\n\r\n.card-score {\r\n    /* border: 2px solid #007bff; */\r\n    color: #007bff;\r\n}\r\n\r\n.card-score-count {\r\n    font-size: 1rem;\r\n}\r\n\r\n.card-score-title {\r\n    font-size: .75rem;\r\n}\r\n\r\n.card-star {\r\n    cursor: pointer;\r\n    /* border: 2px solid #ffc107; */\r\n    color: #ffc107;\r\n    font-size: 1.45rem;\r\n}\r\n\r\n.card-star-title {\r\n    font-size: .75rem;\r\n}",""])},511:function(t,e,n){"use strict";n.r(e);var s=n(3),a=n.n(s);n(204),n(207);class r{constructor(t){this.baseUrl=t}get requestOptions(){const t=localStorage.getItem("token");return t?{credentials:"include",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}:{}}objectToSearchParams(t){const e=Object.entries(t);return this.arrayToSearchParams(e)}arrayToSearchParams(t,e=""){if(t.length<1)return e?"?"+e.substring(1):"";const[n,s]=t.shift();return s&&(Array.isArray(s)?e+="&"+s.map(t=>`${n}=${encodeURIComponent(t)}`).join("&"):e+=`&${n}=${encodeURIComponent(s)}`),this.arrayToSearchParams(t,e)}buildUrl({path:t="",searchParams:e={},fragment:n=""}){return this.baseUrl+t+this.objectToSearchParams(e)+n}}var i=new class extends r{constructor(){super("/api/users")}async getUserProfile(){const t=this.buildUrl({path:"/profile"}),e=await fetch(t,this.requestOptions);return await e.json()}async toggleMarkedPost(t,e){const n=this.buildUrl({path:"/posts"}),s=await fetch(n,{...this.requestOptions,method:"POST",body:JSON.stringify({postId:t,note:e})});return 204===s.status?s:await s.json()}async updateMarkedPostNote(t,e){const n=this.buildUrl({path:"/posts/"+t}),s=await fetch(n,{method:"POST",body:{postId:t,note:e},headers:{"Content-Type":"application/json"}});return await s.json()}async toggleMarkedComment(t,e){const n=this.buildUrl({path:"/comments"}),s=await fetch(n,{...this.requestOptions,method:"POST",body:JSON.stringify({commentId:t,note:e})});return 204===s.status?s:await s.json()}},o=n(513);var c=new class{constructor({state:t,getters:e,mutations:n,actions:s}){Object.defineProperties(this,{state:{value:t},getters:{value:Object(o.a)(e,(e,n,s)=>(e[s]=n(t),e),{})},mutations:{value:n},actions:{value:s}}),this.subscribe=this.subscribe.bind(this),this.commit=this.commit.bind(this),this.dispatch=this.dispatch.bind(this)}subscribe(t,e){return this.state[t].subscribe(e)}commit(t,e){return this.mutations[t].call(this,this.state,e)}dispatch(t,e){return this.actions[t].call(this,{state:this.state,getters:this.getters,commit:this.commit,payload:e})}}({state:{isAuthenticated:Object(s.observable)(!1),isLoading:Object(s.observable)(!1),searchParams:Object(s.observableArray)([]),selectedQuestion:Object(s.observable)({})},getters:{isAuthenticated:t=>t.isAuthenticated,isLoading:t=>t.isLoading,searchParams:t=>t.searchParams,selectedQuestion:t=>t.selectedQuestion},mutations:{SET_IS_AUTHENTICATED(t,e){t.isAuthenticated(e)},SET_IS_LOADING(t,e){t.isLoading(e)},SET_SEARCH_PARAMS(t,e){t.searchParams(e)},SET_SELECTED_QUESTION(t,e){t.selectedQuestion(e)}},actions:{async toggleMarkPost({payload:t}){await i.toggleMarkedPost(t.id,t.note)},async toggleMarkComment({payload:t}){await i.toggleMarkedComment(t.id,t.note)},updateIsAuthenticated({commit:t,payload:e}){t("SET_IS_AUTHENTICATED",e)},updateIsLoading({commit:t,payload:e}){t("SET_IS_LOADING",e)},updateSearchParams({commit:t,payload:e}){t("SET_SEARCH_PARAMS",/\w/.test(e)?e.split(/\s/):[])}}});var l=new class extends r{constructor(){super("/api")}async getNewest(){const t=this.buildUrl({path:"/questions"}),e=await fetch(t);return await e.json()}async getBestMatch(t,e=1,n=50){const s=this.buildUrl({path:"/search/best",searchParams:{words:t,page:e,size:n}}),a=await fetch(s,this.requestOptions);return await a.json()}async getExactMatch(t,e=1,n=50){const s=this.buildUrl({path:"/search/exact",searchParams:{words:t,page:e,size:n}}),a=await fetch(s,this.requestOptions);return await a.json()}async getRankedWeightedMatch(t,e=1,n=50){const s=this.buildUrl({path:"/search/ranked",searchParams:{words:t,page:e,size:n}}),a=await fetch(s,this.requestOptions);return await a.json()}async getWords(t,e=100){const n=this.buildUrl({path:"/search/words",searchParams:{word:t,size:e}}),s=await fetch(n,this.requestOptions);return await s.json()}async getWordAssociation(t,e=100){const n=this.buildUrl({path:"/search/words",searchParams:{word:t,size:e}}),s=await fetch(n,this.requestOptions);return await s.json()}async getForceGraphInput(t,e=8){const n=this.buildUrl({path:"/search/forcegraph",searchParams:{word:t,grade:e}}),s=await fetch(n);return await s.json()}};const d=new DOMParser,p=t=>t.replace(/[<>]/g,t=>"&#"+t.charCodeAt(0)+";"),h=(t,e)=>{const n=new RegExp(`\\b(${e.join("|")})\\b`,"gi");return p(t).replace(n,"<mark>$&</mark>")},m=(t,e=400)=>{const n=d.parseFromString(t,"text/html");return Array.from(n.body.children).filter(t=>/(p|code)/i.test(t.tagName)).map(t=>t.textContent).join(" ").replace(/[<>]/g,t=>"&#"+t.charCodeAt(0)+";").substring(0,e)},u=(t,e,n=" ... ")=>((t,e,n,s=400)=>{const a=new RegExp(`\\b(${e.join("|")})\\b`,"gi");return t.filter(t=>a.test(t)).join(n).replace(/[<>]/g,t=>"&#"+t.charCodeAt(0)+";").substring(0,s).replace(a,"<mark>$&</mark>")})((t=>{const e=d.parseFromString(t,"text/html");return Array.from(e.body.children).filter(t=>!/(hr|br|img)/i.test(t.tagName)).map(t=>t.innerHTML.replace(/<(\/|).+?>/g,"").replace(/(^[\s\:\;]+|[\s\:\;]+$)/g,"").split(/[\.\?\:!]\s+?/g)).flatMap(t=>[...t])})(t),e,n);var g={viewModel:class{constructor(){this.isLoading=c.getters.isLoading,this.words=c.getters.searchParams,this.items=Object(s.observableArray)([]),this.currentPage=Object(s.observable)(1),this.pageCount=Object(s.observable)(1),this.searchAlgo=Object(s.observable)("best"),this.fetchPosts(c.getters.searchParams());const t=c.subscribe("searchParams",t=>{this.fetchPosts(t,this.currentPage.peek())}),e=this.currentPage.subscribe(t=>{this.fetchPosts(this.words.peek(),t)});this.dispose=function(){t.dispose(),e.dispose()},this.togglePost=this.togglePost.bind(this)}previousPage(){const t=this.currentPage.peek();t>1&&this.currentPage(t-1)}nextPage(){const t=this.currentPage.peek();t+1!==this.currentPage.peek()&&this.currentPage(t+1)}async fetchPosts(t,e=1,n=50){let s;if(this.isLoading(!0),t.length>0){let a;switch(this.searchAlgo()){case"best":a=await l.getBestMatch(t,e,n);break;case"exact":a=await l.getExactMatch(t,e,n);break;case"ranked":a=await l.getRankedWeightedMatch(t,e,n)}this.currentPage(a.currentPage),this.pageCount(a.pageCount),s=a.items.map(e=>{const n={...e,body:u(e.body,t)};return e.title&&(n.title=h(e.title,t)),n})}else{const e=await l.getNewest();this.pageCount(0),s=e.map(e=>{const n={...e,body:m(e.body)};return e.title&&(n.title=p(e.title,t)),n})}this.items(s),this.isLoading(!1)}togglePost(t){const e=this.items.peek().find(e=>e.id===t.id),n={...e,marked:!e.marked};this.items.replace(e,n),c.dispatch("toggleMarkPost",{id:t.id,note:""})}},template:'\n\x3c!-- ko if: !isLoading() --\x3e\n    <div class="form-inline mb-3">\n        <div class="form-check">\n            <label class="form-check-label">\n                <input class="form-check-input" type="radio" value="best" data-bind="checked: searchAlgo" checked>\n                <span>Best match</span>\n            </label>\n        </div>\n        <div class="form-check mx-4">\n            <label class="form-check-label">\n                <input class="form-check-input" type="radio" value="exact" data-bind="checked: searchAlgo">\n                <span>Exact match</span>\n            </label>\n        </div>\n        <div class="form-check">\n            <label class="form-check-label">\n                <input class="form-check-input" type="radio" value="ranked" data-bind="checked: searchAlgo">\n                <span>Ranked weighted match</span>\n            </label>\n        </div>\n    </div>\n\n    \x3c!-- ko foreach: items --\x3e\n        <div class="mt-4" data-bind="component: { name: \'so-post\', params: { post: $data, toggle: $component.togglePost, showLink: true } }"></div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: (pageCount() > 1) --\x3e\n        <div class="text-center">\n            <b data-bind="text: \'page \' + currentPage()"></b>\n        </div>\n        <nav class="d-flex justify-content-center mt-3">\n            <ul class="pagination">\n                <li class="page-item" data-bind="css: { disabled: (currentPage() === 1) }">\n                    <a class="page-link" data-bind="click: previousPage">Previous</a>\n                </li>\n                <li class="page-item" data-bind="css: { disabled: (currentPage() === pageCount()) }">\n                    <a class="page-link" data-bind="click: nextPage">Next</a>\n                </li>\n            </ul>\n        </nav>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n'};var b=new class{constructor(t){this.routes=t,this.currentRoute=Object(s.observable)({...t[0],params:{}})}setRoute(t,e={}){const n=this.routes.find(e=>e.name===t);t!==this.currentRoute().name&&this.currentRoute({...n,params:e})}getRoute(){return this.currentRoute()}}([{name:"home",component:"so-home",title:"Home"},{name:"sign-in",component:"so-sign-in",title:"Sign in"},{name:"user-profile",component:"so-user-profile",title:"User profile"},{name:"question",component:"so-question",title:"Question"},{name:"failure",component:"so-failure",title:"Failure"},{name:"force-graph",component:"so-force-graph",title:"Force Graph"},{name:"word-cloud",component:"so-word-cloud",title:"Word Cloud"},{name:"register",component:"so-register",title:"Register"}]);class f{constructor(t){if(void 0!==t[0]){const{$raw:e={},...n}=t[0];this.$raw=e,this.$params=n}else this.$raw={},this.$params={};if(void 0!==t[1]){const{element:e,templateNodes:n=[]}=t[1];this.$el=e,this.$tNodes=n}else this.$el=void 0,this.$tNodes=[];this.$store=c,this.$router=b,this.isLoading=Object(s.computed)({read:this.$store.getters.isLoading,write:t=>this.$store.dispatch("updateIsLoading",t)})}}function v(t,e){return{viewModel:{createViewModel:(...e)=>new t(e)},template:e}}var w=new class extends r{constructor(){super("/api")}async register(t){const e=this.buildUrl({path:"/register"}),n=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});return await n.json()}async signIn(t){const e=this.buildUrl({path:"/oauth"}),n=await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(200===n.status){const t=await n.text();return localStorage.setItem("token",t),t}}hasToken(){return null!==localStorage.getItem("token")}signOut(){localStorage.removeItem("token")}};var y=v(class extends f{constructor(t){super(t),this.email=Object(s.observable)(""),this.password=Object(s.observable)("")}async signIn(){if(!this.inputFilledOut())return void alert("Please fill out all sign in data");const t={email:this.email(),password:this.password()};void 0!==await w.signIn(t)?(this.$store.dispatch("updateIsAuthenticated",!0),this.$router.setRoute("home")):alert("Sign in failed")}inputFilledOut(){return this.email().length>0&&this.password().length>0}},'\n<div class="card">\n    <div class="card-body">\n        <form data-bind="submit: signIn">\n            <div class="form-group">\n                <label for="email">Email address</label>\n                <input type="email" class="form-control" id="email" data-bind="value: email">\n                <small class="form-text text-muted">We\'ll never share your email with anyone else.</small>\n            </div>\n            <div class="form-group">\n                <label for="password">Password</label>\n                <input type="password" class="form-control" id="password" data-bind="value: password">\n            </div>\n            <button type="submit" class="btn btn-primary">Sign in</button>\n        </form>\n    </div>\n</div>\n');var k={viewModel:class{constructor(){this.isLoading=c.getters.isLoading,this.profile=Object(s.observable)({}),this.markedPosts=Object(s.observableArray)([]),this.markedComments=Object(s.observableArray)([]),this.searchHistory=Object(s.observableArray)([]),this.fetchUserProfile(),this.togglePost=this.togglePost.bind(this)}async fetchUserProfile(){this.isLoading(!0);let t=await i.getUserProfile();t.markedPosts=t.markedPosts.map(t=>{const e={...t,body:m(t.body)};return t.title&&(e.title=p(t.title)),e}),this.profile(t),this.markedPosts(t.markedPosts),this.markedComments(t.markedComments),this.searchHistory(t.searchHistory),console.dir(this.searchHistory()),this.isLoading(!1)}togglePost(t){const e=this.markedPosts.peek().find(e=>e.id===t.id),n={...e,marked:!e.marked};this.markedPosts.replace(e,n),c.dispatch("toggleMarkPost",{id:t.id,note:""})}toggleComment(t){const e=this.markedComments.peek().find(e=>e.id===t.id),n={...e,marked:!e.marked};this.markedComments.replace(e,n),c.dispatch("toggleMarkComment",{id:t.id,note:""})}},template:'\n\x3c!-- ko ifnot: isLoading --\x3e\n\n<h1 class="display-4 mt-0" data-bind="text: profile().displayName">User Name here</h1>\n\n<div class="card">\n    <div class="card-body">\n        <p><b>Email: </b><span data-bind="text: profile().email"></span></p>\n        <p><b>Profile created: </b><span data-bind="text: profile().creationDate"></span></p>\n    </div>\n    <ul class="list-group list-group-flush">\n        <li class="list-group-item bg-light">\n            <b>Search history:</b>\n        </li>\n        \x3c!-- ko foreach: searchHistory --\x3e\n        <li class="list-group-item" data-bind="text: $data.searchText"></li>\n        \x3c!-- /ko --\x3e\n    </ul>\n</div>\n\n<h1 class="display-4 mb-2 mt-5">Marked posts</h1>\n\x3c!-- ko foreach: markedPosts --\x3e\n<div class="mb-5" data-bind="component: {\n    name: \'so-post\',\n    params: {\n        post: $data,\n        toggle: $component.togglePost,\n        showLink: true\n    }\n}"></div>\n\x3c!-- /ko --\x3e\n\n<h1 class="display-4 mb-2 mt-5">Marked comments</h1>\n<ul class="list-group mx-3 mx-lg-auto" data-bind="foreach: markedComments">\n    <li class="list-group-item">\n        <aside class="float-left pr-3">\n            <div class="card-star" data-bind="click: (comment, event) => $component.toggleComment(comment)">\n                <i class="fas fa-star" data-bind="css: { fas: $data.marked, far: !$data.marked }"></i>\n                <div class="card-star-title">mark</div>\n            </div>\n            <div class="card-score">\n                <div class="card-score-count" data-bind="text: $data.score"></div>\n                <div class="card-score-title">score</div>\n            </div>\n        </aside>\n        <p class="mb-1 clearfix" data-bind="text: $data.text"></p>\n        <footer class="text-muted text-right small">\n            <span>by</span>\n            <cite data-bind="text: $data.authorDisplayName"></cite>\n            <span>on the <time data-bind="text: $data.creationDate"></time></span>\n        </footer>\n    </li>\n</ul>\n\x3c!-- /ko --\x3e\n'};var x=v(class extends f{constructor(t){super(t),this.username=Object(s.observable)(""),this.email=Object(s.observable)(""),this.password=Object(s.observable)("")}async register(){if(!this.inputFilledOut())return void alert("Please fill out all registration data");this.isLoading(!0);const t={displayName:this.username(),email:this.email(),password:this.password()};let e=await w.register(t);if(void 0!==e.email){const t={email:e.email,password:this.password()};await w.signIn(t),this.$store.dispatch("updateIsAuthenticated",!0),this.$router.setRoute("user-profile")}else alert("Registration Failed");this.isLoading(!1)}inputFilledOut(){return this.username().length>0&&this.email().length>0&&this.password().length>0}},'\n<div class="card" data-bind="visible: !isLoading()">\n    <div class="card-body">\n        <form data-bind="submit: register">\n            <div class="form-group">\n                <label for="username">User Name</label>\n                <input type="text" class="form-control" id="username" data-bind="value: username">\n            </div>\n            <div class="form-group">\n                <label for="email">Email address</label>\n                <input type="email" class="form-control" id="email" data-bind="value: email">\n                <small class="form-text text-muted">We\'ll never share your email with anyone else.</small>\n            </div>\n            <div class="form-group">\n                <label for="password">Password</label>\n                <input type="password" class="form-control" id="password" data-bind="value: password">\n            </div>\n            <button type="submit" class="btn btn-primary">Register</button>\n        </form>\n    </div>\n</div>\n');var P=new class extends r{constructor(){super("/api/questions")}async fetchQuestionById(t){const e=this.buildUrl({path:`/${t}`}),n=await fetch(e,this.requestOptions);return await n.json()}};var O={viewModel:class{constructor({id:t}){this.postId=t,this.isLoading=c.getters.isLoading,this.post=Object(s.observable)({}),this.answers=Object(s.observableArray)([]),this.fetchQuestion(),this.toggleQuestion=this.toggleQuestion.bind(this),this.toggleAnswer=this.toggleAnswer.bind(this)}async fetchQuestion(){this.isLoading(!0);const{answers:t,...e}=await P.fetchQuestionById(this.postId);this.post(e),this.answers(t),this.isLoading(!1)}toggleQuestion(t){this.post({...t,marked:!t.marked}),c.dispatch("toggleMarkPost",{id:t.id,note:""})}toggleAnswer(t){const e=this.answers.peek().find(e=>e.id===t.id),n={...e,marked:!e.marked};this.answers.replace(e,n),c.dispatch("toggleMarkPost",{id:t.id,note:""})}},template:'\n\x3c!-- ko ifnot: isLoading --\x3e\n<div data-bind="component: {\n    name: \'so-post\',\n    params: {\n        post: post(),\n        toggle: toggleQuestion,\n        showComments: true\n    }\n}"></div>\n\x3c!-- ko foreach: answers --\x3e\n<div class="mt-5" data-bind="component: {\n    name: \'so-post\',\n    params: {\n        post: $data,\n        toggle: $component.toggleAnswer,\n        showComments: true\n    }\n}"></div>\n\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n'};var C={viewModel:class{constructor(){}},template:"\n<h1>Whoops...</h1>\n"};var S={name:"so-app",viewModel:class{constructor(){w.hasToken()&&c.commit("SET_IS_AUTHENTICATED",!0),this.showPrompt=Object(s.observable)(!1),this.testValue=Object(s.observable)("test"),this.isLoading=c.getters.isLoading}getComponent(){const t=b.currentRoute();return{name:t.component,params:t.params}}},template:'\n<so-navbar id="navbar"></so-navbar>\n\n<main class="container py-3 py-lg-5" data-bind="component: getComponent()"></main>\n\n\x3c!-- ko if: isLoading --\x3e\n    <so-loader id="loader" params="size: 200"></so-loader>\n\x3c!-- /ko --\x3e\n'};var j={viewModel:class{constructor(t){this.size=t.size||44}},template:'\n\x3c!-- By Sam Herbert (@sherb), for everyone. More @ http://goo.gl/7AJzbL --\x3e\n<svg\n    data-bind="attr: { width: size, height: size }"\n    width="44"\n    height="44"\n    viewBox="0 0 44 44"\n    xmlns="http://www.w3.org/2000/svg"\n    stroke="#343a40">\n    <g fill="none" fill-rule="evenodd" stroke-width="2">\n        <circle cx="22" cy="22" r="1">\n            <animate attributeName="r"\n                begin="0s" dur="1.8s"\n                values="1; 20"\n                calcMode="spline"\n                keyTimes="0; 1"\n                keySplines="0.165, 0.84, 0.44, 1"\n                repeatCount="indefinite" />\n            <animate attributeName="stroke-opacity"\n                begin="0s" dur="1.8s"\n                values="1; 0"\n                calcMode="spline"\n                keyTimes="0; 1"\n                keySplines="0.3, 0.61, 0.355, 1"\n                repeatCount="indefinite" />\n        </circle>\n        <circle cx="22" cy="22" r="1">\n            <animate attributeName="r"\n                begin="-0.9s" dur="1.8s"\n                values="1; 20"\n                calcMode="spline"\n                keyTimes="0; 1"\n                keySplines="0.165, 0.84, 0.44, 1"\n                repeatCount="indefinite" />\n            <animate attributeName="stroke-opacity"\n                begin="-0.9s" dur="1.8s"\n                values="1; 0"\n                calcMode="spline"\n                keyTimes="0; 1"\n                keySplines="0.3, 0.61, 0.355, 1"\n                repeatCount="indefinite" />\n        </circle>\n    </g>\n</svg>\n'};var A=v(class extends f{constructor(t){super(t),this.rawSearch=Object(s.observable)(""),this.collapsible=document.getElementById("navbarCollapse")}updateSearch(){const t=this.rawSearch();c.dispatch("updateSearchParams",t)}toggleCollapse(){this.collapsible.classList.toggle("show")}navigate(t,e,n={}){t.preventDefault(),b.setRoute(e,n)}signOut(){w.signOut(),c.commit("SET_IS_AUTHENTICATED",!1)}},'\n<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">\n    <div class="container">\n        <a class="navbar-brand" href="#">App</a>\n        <button class="navbar-toggler" type="button" data-bind="click: toggleCollapse">\n            <span class="navbar-toggler-icon"></span>\n        </button>\n        <div id="navbarCollapse" class="collapse navbar-collapse">\n            <ul class="navbar-nav mr-auto">\n                <li class="nav-item">\n                    <a class="nav-link" href="/home" data-bind="click: (_, event) => navigate(event, \'home\')">Home</a>\n                </li>\n                <li class="nav-item">\n                    <a class="nav-link" href="/force-Graph" data-bind="click: (_, event) => navigate(event, \'force-graph\')">Force Graph</a>\n                </li>\n                <li class="nav-item">\n                    <a class="nav-link" href="/word-cloud" data-bind="click: (_, event) => navigate(event, \'word-cloud\')">Word Cloud</a>\n                </li>\n                <li class="nav-item">\n                    <a class="nav-link" href="/user-profile" data-bind="visible: $store.getters.isAuthenticated(), click: (_, event) => navigate(event, \'user-profile\')">User profile</a>\n                </li>\n            </ul>\n\n            <form class="form-inline my-2 mr-0 my-lg-0 mr-lg-2" data-bind="submit: updateSearch">\n                <input type="text" class="form-control" placeholder="Search..." data-bind="value: rawSearch">\n            </form>\n\n            <button class="btn btn-outline-success mr-2"\n                data-bind="visible: !$store.getters.isAuthenticated(), click: (_, event) => navigate(event, \'sign-in\')"\n                type="button">Sign in</button>\n\n            <button class="btn btn-outline-danger"\n                data-bind="visible: $store.getters.isAuthenticated(), click: signOut"\n                type="button">Sign Out</button>\n\n            <button class="btn btn-outline-primary"\n                data-bind="visible: !$store.getters.isAuthenticated(), click: (_, event) => navigate(event, \'register\')"\n                type="button">Register</button>\n        </div>\n    </div>\n</nav>\n'),T=n(86),$=n(87);var L={viewModel:class{constructor(){this.isLoading=c.getters.isLoading,this.chart=T.init(document.getElementById("chart")),this.initCircularGraph();const t=c.subscribe("searchParams",t=>{this.isLoading(!0),this.fetchGraphInput(t[0])});let e;const n=()=>{void 0!==e&&clearTimeout(e),e=setTimeout(()=>{null!=this.chart&&void 0!==this.chart&&this.chart.resize()},300)};window.addEventListener("resize",n),this.dispose=function(){t.dispose(),window.removeEventListener("resize",n),this.chart.dispose()}}async fetchGraphInput(t){let e=await l.getForceGraphInput(t);this.drawForceGraph(e,t)}initGraph(){this.chart.setOption({title:{subtext:"",top:"top",left:"right"},tooltip:{},series:[{type:"graph",layout:"force",roam:!0,focusNodeAdjacency:!0,label:{show:!0,normal:{position:"right"}},force:{repulsion:100,gravity:.05,edgeLength:100},zoom:2}]})}initCircularGraph(){this.chart.setOption({title:{subtext:"",top:"top",left:"right"},tooltip:{},series:[{type:"graph",layout:"circular",roam:!0,focusNodeAdjacency:!0,label:{show:!0,normal:{position:"right"}},lineStyle:{color:"source",curveness:.3},emphasis:{lineStyle:{width:10}},zoom:.8}]})}drawForceGraph(t,e){this.isLoading(!0);const n=this.mapNodes(t.nodes),s=this.mapEdges(t.links),a=n.length,r=s.length;this.chart.setOption({title:{text:`Force Graph for '${e}'\n\nWords: ${a}\nAssociations: ${r}`},series:[{data:n,links:s}]}),this.isLoading(!1)}mapNodes(t){return t.map(t=>(t.itemStyle={color:$.randomColor()},t.symbolSize=20,t.value=t.symbolSize,t.category="Word",t.x=t.y=null,t.draggable=!0,t.name=t.id,t))}mapEdges(t){return t.map(t=>{let e=t.value%2>0?t.value/2+t.value%2:t.value,n=Math.sqrt(e);return t.lineStyle={width:n},t})}},template:'\n<div id="chart" style="width:100%;height:80vh;"></div>\n'};n(506);var M=v(class extends f{constructor(t){super(t),this.chart=T.init(document.getElementById("word-cloud")),this.initGraph();const e=this.$store.subscribe("searchParams",t=>{this.isLoading(!0),this.loadCloudInput(t[0])});let n;const s=()=>{void 0!==n&&clearTimeout(n),n=setTimeout(()=>{null!=this.chart&&void 0!==this.chart&&this.chart.resize()},300)};window.addEventListener("resize",s),this.dispose=function(){e.dispose(),window.removeEventListener("resize",s),this.chart.dispose()}}async loadCloudInput(t){let e=await l.getWords(t,100);this.drawWordCloud(e,t),this.isLoading(!1)}initGraph(){this.chart.setOption({title:{subtext:"",top:"top",left:"right"},tooltip:{},series:[{type:"wordCloud",shape:"circle",left:"center",top:"center",width:"100%",height:"100%",right:null,bottom:null,sizeRange:[30,90],rotationRange:[-90,90],rotationStep:45,gridSize:11,drawOutOfBound:!0,textStyle:{normal:{fontFamily:"sans-serif",fontWeight:"bold",color:$},emphasis:{shadowBlur:10,shadowColor:"#333"}},zoom:2,data:[{name:"Enter Search Term",value:500,textStyle:{normal:{},emphasis:{}}}]}]})}drawWordCloud(t,e){const n=this.mapWord(t);this.chart.setOption({title:{text:`Word cloud for '${e}'`},series:[{data:n}]})}mapWord(t){return t.map(t=>(t.name=t.word,t.value=t.weight,t.textStyle={normal:{},emphasis:{}},t))}},'\n<div id="word-cloud" style="width:100%;height:80vh;"></div>\n');var I={viewModel:class{constructor(t={}){const{post:e={},toggle:n=(()=>{}),showLink:a=!1,showComments:r=!1}=t;this.showPrompt=Object(s.observable)(!1),this.selectedComment={},this.postWasToggled=!1,r&&(this.comments=Object(s.observableArray)(e.comments)),this.post=e,this.toggle=n,this.showLink=a,this.showComments=r,this.isAuthenticated=c.getters.isAuthenticated}showPromptOnTogglePost(t){t.marked?this.toggle({...t,note:""}):(this.postWasToggled=!0,this.showPrompt(!0))}showPromptOnToggleComment(t){t.marked?this.toggleComment({...t,note:""}):(this.selectedComment=t,this.showPrompt(!0))}toggleComment(t){const e=this.comments.peek().find(e=>e.id===t.id),n={...e,marked:!e.marked,note:t.note};this.comments.replace(e,n),c.dispatch("toggleMarkComment",{id:t.id,note:t.note})}navigateToQuestion(){b.setRoute("question",{id:this.post.questionId})}},template:'\n<article class="card card-post">\n    <div class="card-body">\n        \x3c!-- ko if: post.title --\x3e\n        <h5 class="card-title text-truncate mb-3" data-bind="html: post.title"></h5>\n        \x3c!-- /ko --\x3e\n        <aside class="float-left pr-3">\n            \x3c!-- ko if: $component.isAuthenticated() --\x3e\n            <div class="card-star" data-bind="click: ({ post }, event) => { showPromptOnTogglePost(post) }">\n                <i class="fa-star" data-bind="css: { fas: post.marked, far: !post.marked }"></i>\n                <div class="card-star-title">mark</div>\n            </div>\n            \x3c!-- /ko --\x3e\n            <div class="card-score">\n                <div class="card-score-count" data-bind="html: post.score"></div>\n                <div class="card-score-title">score</div>\n            </div>\n        </aside>\n        <div data-bind="html: post.body"></div>\n        \x3c!-- ko if: post.note --\x3e\n        <div class="mt-2 text-info font-weight-bold" data-bind="text: \'Note: \' + post.note"></div>\n        \x3c!-- /ko --\x3e\n    </div>\n    <footer class="card-footer bg-white d-flex justify-content-between align-items-center">\n        <div class="text-muted">\n            <span>by</span>\n            <cite data-bind="text: post.authorDisplayName"></cite>\n            <span>on the <time data-bind="text: post.creationDate"></time></span>\n        </div>\n        \x3c!-- ko if: showLink --\x3e\n        <button type="button" class="btn btn-primary btn-sm" data-bind="click: navigateToQuestion">Read more</button>\n        \x3c!-- /ko --\x3e\n    </footer>\n</article>\n\n\x3c!-- ko if: showComments --\x3e\n<ul class="list-group mx-3 mx-lg-auto" data-bind="foreach: comments">\n    <li class="list-group-item">\n        <aside class="float-left pr-3">\n            \x3c!-- ko if: $component.isAuthenticated() --\x3e\n            <div class="card-star" data-bind="click: (comment, event) => $component.showPromptOnToggleComment(comment)">\n                <i class="fas fa-star" data-bind="css: { fas: $data.marked, far: !$data.marked }"></i>\n                <div class="card-star-title">mark</div>\n            </div>\n            \x3c!-- /ko --\x3e\n            <div class="card-score">\n                <div class="card-score-count" data-bind="text: $data.score"></div>\n                <div class="card-score-title">score</div>\n            </div>\n        </aside>\n\n        <p class="mb-1 clearfix" data-bind="text: $data.text"></p>\n        <p class="" data-bind="text: $data.note"></p>\n        <footer class="text-muted text-right small">\n            <span>by</span>\n            <cite data-bind="text: $data.authorDisplayName"></cite>\n            <span>on the <time data-bind="text: $data.creationDate"></time></span>\n        </footer>\n    </li>\n</ul>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko component: {\n    name: \'so-prompt\',\n    params: {\n        showPrompt,\n        onAccept: value => {\n            showPrompt(false)\n\n            if (postWasToggled) {\n                toggle({ ...post, note: value })\n                postWasToggled = false\n            } else if (showComments) {\n                toggleComment({ ...selectedComment, note: value, marked: !selectedComment.marked })\n            }\n        },\n        onCancel: () => {\n            showPrompt(false)\n        }\n    }\n} --\x3e\x3c!-- /ko --\x3e\n'};class E{constructor(t={}){const{onAccept:e,onCancel:n,showPrompt:a}=t;this.onAccept=e,this.onCancel=n,this.showPrompt=a,this.noteValue=Object(s.observable)("");const r=t=>{27===t.keyCode&&a(!1)};document.addEventListener("keyup",r),this.dispose=function(){document.removeEventListener("keyup",r)}}}var z={viewModel:{createViewModel:(t,e)=>new E(t,e)},template:'\n<div class="modal" data-bind="css: { \'d-block show\': showPrompt }">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title">Add note</h5>\n                <button type="button" class="close" data-bind="click: () => { showPrompt(false) }">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                <textarea class="form-control" placeholder="Enter an optional note here." rows="3" data-bind="value: noteValue"></textarea>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-bind="click: () => { onAccept(noteValue()); noteValue(\'\') }">Accept</button>\n                <button type="button" class="btn btn-secondary" data-bind="click: () => onCancel()">Cancel</button>\n            </div>\n        </div>\n    </div>\n    <div class="modal-backdrop" style="z-index: -1" data-bind="click: () => { showPrompt(false) }, css: { \'d-block show\': showPrompt }"></div>\n</div>\n'};a.a.components.register("so-home",g),a.a.components.register("so-sign-in",y),a.a.components.register("so-user-profile",k),a.a.components.register("so-register",x),a.a.components.register("so-question",O),a.a.components.register("so-failure",C),a.a.components.register("so-app",S),a.a.components.register("so-loader",j),a.a.components.register("so-navbar",A),a.a.components.register("so-force-graph",L),a.a.components.register("so-word-cloud",M),a.a.components.register("so-post",I),a.a.components.register("so-prompt",z),a.a.applyBindings()}});